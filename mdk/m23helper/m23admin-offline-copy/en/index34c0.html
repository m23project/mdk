<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from 192.168.1.23/m23admin/index.php?page=showCurrentWorkPHP&client=defuefi&id=927&m23clientID=927&script= by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 18 Jan 2018 22:37:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" /><!-- /Added by HTTrack -->
<head>
	<title>m23 - Admin (showCurrentWorkPHP)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<meta http-equiv="expires" content="0">
	<link rel="stylesheet" type="text/css" href="images/index.css">
	<link rel="stylesheet" type="text/css" href="images/jquery.css">
	<script src="images/codepress.js" type="text/javascript"></script>
	<script type="text/javascript" src="images/jquery.min.js"></script>
	<script type="text/javascript" src="images/jquery-ui.min.js"></script>
</head>

 <body bgcolor="#596374" onload="if (typeof setEFIStartEndPositionIfEFIBootPartitionTypeIsSet == 'function') { setEFIStartEndPositionIfEFIBootPartitionTypeIsSet(); }">

<table align="left" cellspacing="0"  cellpadding="5" border="0">
	<tr>
		<td colspan="2" align="center">
			<table class="box" align="center" id="ID_headHeight">
				<tr>
					<td width="900">
						
<table cellspacing="0" cellpadding="3" width="100%" border="0">
	<tr>
		<td width="100" align="center">
			<a HREF="http://m23.goos-habermann.de/" target="_blank">
				<img src="images/m23.png" border="0">
							</a>
		</td>

		<td align="center">
			<table class="helptable">
				<tr>
				
				<tr>
					<td colspan=2>
						<nobr><b>Your IP address:</b> 192.168.1.77 <b>Servername or IP:</b> 192.168.1.23 <b>m23 version and patch level:</b> 18.1 rock (101083) <a href="index42f0.html?page=serverStatus">Server status</a></nobr>
					</td>
				</tr>
				<tr><td colspan=2><hr></td></tr>
				<tr>
					<td align="left">
						&raquo;&nbsp;<a href="http://m23.sf.net/" target="_blank">m23 project page</a>&nbsp;&nbsp;
						&raquo;&nbsp;<a href="http://m23.sourceforge.net/faq/frageFAQ.htm" target="_blank">m23 forum</a>&nbsp;&nbsp;
						&raquo;&nbsp;<a href="http://www.goos-habermann.de/" target="_blank">Commercial support</a>&nbsp;&nbsp;
						&raquo;&nbsp;<a href="http://www.goos-habermann.de/index.php?s=SchulungBeratung" target="_blank">m23 training</a>
						&raquo;&nbsp;<a href="http://m23.sourceforge.net/questionnaire">m23 questionnaire</a><br>
					</td>
					<td align="right">
						god <a href="indexbfd1.html?logout=1">(Log out)</a>
					</td>
				</tr>
								
			</table>
		</td>

		<td align="right">
<!--m23customPatchBegin type=change id=tuxLogo-->
			<img src="images/sweet-tux.png">
<!--m23customPatchEnd id=tuxLogo-->
		</td>
	</tr>
</table>					</td>
				<tr>
			</table>
		</td>
	</tr>
	<tr>
		<td valign="top" width="150">
			<table class="box" valign="top">
				<tr>
					<td align="left">
						<br>
<form method="GET" action="http://god:m23@192.168.1.23/m23admin/index.php">
<center>
<SELECT  id="LB_language" name="LB_language"  >
<option value="en">English</option>
<option value="de">Deutsch</option>
<option value="fr">Fran&ccedil;ais</option>
</SELECT>
<input type="hidden" name="page" value="showCurrentWorkPHP">
<input type="hidden" name="m23_language" value="en">
<input type="submit" name="BUT_lang" value="OK">
</center>
</form>


<ul class="navmenu">
<li>Server<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index.html"><img border="0" src="images/home_mini.png"></a></td>
		<td><a href="index.html">Home</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexad98.html?page=serverSettings"><img border="0" src="images/settings_mini.png"></a></td>
		<td><a href="indexad98.html?page=serverSettings">Server settings</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index9104.html?page=m23RemoteAdministrationService"><img border="0" src="images/m23remoteadministrationservice-mini.png"></a></td>
		<td><a href="index9104.html?page=m23RemoteAdministrationService">m23 remote administration service</a></td>
		<td></td>
		</tr></table></li><br>
	 <li>Clients<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexfb56.html?page=clientsoverview"><img border="0" src="images/overview-mini.png"></a></td>
		<td><a href="indexfb56.html?page=clientsoverview">Overview</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexe9d8.html?page=addclient&amp;clearSession=1"><img border="0" src="images/red.png"></a></td>
		<td><a href="indexe9d8.html?page=addclient&amp;clearSession=1">Add</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexc607.html?page=clientsoverview&amp;action=setup"><img border="0" src="images/yellow.png"></a></td>
		<td><a href="indexc607.html?page=clientsoverview&amp;action=setup">Setup</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index95c9.html?page=clientsoverview&amp;action=delete"><img border="0" src="images/mini_trash.png"></a></td>
		<td><a href="index95c9.html?page=clientsoverview&amp;action=delete">Delete</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexb010.html?page=assimilate"><img border="0" src="images/assimilate-mini.png"></a></td>
		<td><a href="indexb010.html?page=assimilate">Assimilate</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index79a0.html?page=makeBootMedia"><img border="0" src="images/cdrom-mini.png"></a></td>
		<td><a href="index79a0.html?page=makeBootMedia">Create boot media</a></td>
		<td></td>
		</tr></table></li><br>
	 <li>Virtual clients<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index9740.html?page=addvmclient&amp;clearSession=1"><img border="0" src="images/red.png"></a></td>
		<td><a href="index9740.html?page=addvmclient&amp;clearSession=1">Create VM</a></td>
		<td></td>
		</tr></table></li><br>
	 <li>Groups<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexf13d.html?page=groupsoverview"><img border="0" src="images/overview-mini.png"></a></td>
		<td><a href="indexf13d.html?page=groupsoverview">Overview</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexbae6.html?page=creategroup"><img border="0" src="images/add-mini.png"></a></td>
		<td><a href="indexbae6.html?page=creategroup">Add</a></td>
		<td></td>
		</tr></table></li><br>
	 <li>Packages<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index6dcf.html?page=clientsoverview&amp;action=install"><img border="0" src="images/green.png"></a></td>
		<td><a href="index6dcf.html?page=clientsoverview&amp;action=install">Install</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index936d.html?page=clientsoverview&amp;action=deinstall"><img border="0" src="images/deinstall-mini.png"></a></td>
		<td><a href="index936d.html?page=clientsoverview&amp;action=deinstall">Deinstall</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexbbd7.html?page=clientsoverview&amp;action=update"><img border="0" src="images/update_mini.png"></a></td>
		<td><a href="indexbbd7.html?page=clientsoverview&amp;action=update">Update</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexb5c4.html?page=autoUpdate"><img border="0" src="images/autoupdate_mini.png"></a></td>
		<td><a href="indexb5c4.html?page=autoUpdate">Automatical update</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexf34f.html?page=poolBuilder"><img border="0" src="images/update_mini.png"></a></td>
		<td><a href="indexf34f.html?page=poolBuilder">Pool builder</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index73d3.html?page=scriptEditor"><img border="0" src="images/scripteditor-mini.png"></a></td>
		<td><a href="index73d3.html?page=scriptEditor">Script editor</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index3a18.html?page=packageBuilder"><img border="0" src="images/update_mini.png"></a></td>
		<td><a href="index3a18.html?page=packageBuilder">Package builder</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexd1df.html?page=clientsourceslist"><img border="0" src="images/package-mini.png"></a></td>
		<td><a href="indexd1df.html?page=clientsourceslist">Package sources</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index8b5a.html?page=installpackages&amp;action=packageSelection"><img border="0" src="images/packageselection-mini.png"></a></td>
		<td><a href="index8b5a.html?page=installpackages&amp;action=packageSelection">Edit package selections</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index4804.html?page=comparePackageStatus"><img border="0" src="images/comparepackagestatus-mini.png"></a></td>
		<td><a href="index4804.html?page=comparePackageStatus">Compare package status</a></td>
		<td></td>
		</tr></table></li><br>
	 <li>Mass tools<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index42cc.html?page=addclient&amp;action=clientBuilder&amp;clearSession=1"><img border="0" src="images/clientbuilder-mini.png"></a></td>
		<td><a href="index42cc.html?page=addclient&amp;action=clientBuilder&amp;clearSession=1">Client builder</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="index9ac3.html?page=clientsoverview&amp;action=massInstall"><img border="0" src="images/massinstall-mini.png"></a></td>
		<td><a href="index9ac3.html?page=clientsoverview&amp;action=massInstall">Mass install</a></td>
		<td></td>
		</tr></table></li><br>
	 <li>Support<br>
	 <table> 
	 <tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="indexe767.html?page=support"><img border="0" src="images/help-mini.png"></a></td>
		<td><a href="indexe767.html?page=support">Support</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="http://m23.sourceforge.net/phpBB2"><img border="0" src="images/bug-mini.png"></a></td>
		<td><a href="http://m23.sourceforge.net/phpBB2">!!!Report a bug!!!</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="http://lists.sourceforge.net/mailman/listinfo/m23-news"><img border="0" src="images/newsletter-mini.png"></a></td>
		<td><a href="http://lists.sourceforge.net/mailman/listinfo/m23-news">Subscribe to newsletter</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="http://m23.sourceforge.net/questionnaire"><img border="0" src="images/questionaire-mini.png"></a></td>
		<td><a href="http://m23.sourceforge.net/questionnaire">m23 questionnaire</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="http://god:m23@192.168.1.23/m23manual/en/index.html"><img border="0" src="images/book-mini.png"></a></td>
		<td><a href="http://god:m23@192.168.1.23/m23manual/en/index.html">User manual</a></td>
		<td></td>
		</tr><tr>
		<td>&nbsp;&nbsp;</td>
		<td valign="top"><a href="http://god:m23@192.168.1.23/devguide/index.html"><img border="0" src="images/book-mini.png"></a></td>
		<td><a href="http://god:m23@192.168.1.23/devguide/index.html">Development Guide</a></td>
		<td></td>
		</tr></table></li><br>
	 </ul>					</td>
				<tr>
			</table>
		</td>
		<td valign="top">
			<table class="box" align="center" >
				<tr>
					<td valign="top" align="center"><br>
						
	<div align="right">
		<a href="javascript:window.print()">
			<img src="images/printer-mini.png" border="0" alt="Print" title="Print">
		</a>
		<a href="#m23helpBox">
			<img src="images/helpred-mini.png" border="0" alt="Help" title="Help">
		</a>
	</div>
	<span class="title">Current job script: defuefi</span><form method="post" action="http://god:m23@192.168.1.23/m23admin/index.php" name="htmlform" id="htmlformID" enctype="multipart/form-data">
	<script language="javascript">document.write('<input type="hidden" name="javaScriptEnabled" value="on">');</script><input type="hidden" name="page" value="showCurrentWorkPHP"><style type="text/css"><!--/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.bash .de1, .bash .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.bash  {font-family:monospace;}
.bash .imp {font-weight: bold; color: red;}
.bash li, .bash .li1 {font-weight: normal; vertical-align:top;}
.bash .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.bash .li2 {font-weight: bold; vertical-align:top;}
.bash .kw1 {color: #000000; font-weight: bold;}
.bash .kw2 {color: #c20cb9; font-weight: bold;}
.bash .kw3 {color: #7a0874; font-weight: bold;}
.bash .co0 {color: #666666; font-style: italic;}
.bash .co1 {color: #800000;}
.bash .co2 {color: #cc0000; font-style: italic;}
.bash .co3 {color: #000000; font-weight: bold;}
.bash .co4 {color: #666666;}
.bash .es1 {color: #000099; font-weight: bold;}
.bash .es2 {color: #007800;}
.bash .es3 {color: #007800;}
.bash .es4 {color: #007800;}
.bash .es5 {color: #780078;}
.bash .es_h {color: #000099; font-weight: bold;}
.bash .br0 {color: #7a0874; font-weight: bold;}
.bash .sy0 {color: #000000; font-weight: bold;}
.bash .st0 {color: #ff0000;}
.bash .st_h {color: #ff0000;}
.bash .nu0 {color: #000000;}
.bash .re0 {color: #007800;}
.bash .re1 {color: #007800;}
.bash .re2 {color: #007800;}
.bash .re4 {color: #007800;}
.bash .re5 {color: #660033;}
.bash span.xtra { display:block; }
--></style>
Notice: Undefined index: m23Shared in /m23/inc/db.php on line 260

<table align="center" ><tr><td><div class="subtable_shadow">
<table class="subtable" align="center" >

	<tr>
		<td><span class="titlesmal">wget command to fetch the work.php file</span></td>
		<td>
	<textarea name="TA_wgetCode" id="idTA_wgetCode" cols="100" rows="1" readonly>wget "http://192.168.1.23/work.php?m23clientID=927" -O /tmp/work.sh; less /tmp/work.sh</textarea>
	<script>
		function TA_wgetCodeScrollEndJS()
		{
			var elem=document.getElementsByName('TA_wgetCode');
			elem[0].scrollTop = elem[0].scrollHeight - elem[0].clientHeight;
		}
		
		TA_wgetCodeScrollEndJS();
	</script>
	
	</tr>
	<tr>
		<td colspan="2"><span class="titlesmal">Current contents of the work.php file</span></td>
	</tr>
	<tr>
		<td colspan="2" bgcolor="#f8f8f8" style="padding:10px">
	<p>
	<div class="bash"><ol><li class="li1"><div class="de1"><span class="co0">#!/bin/bash</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">sync</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="kw2">date</span> <span class="nu0">011823352018.08</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">rm</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1"><span class="kw2">cat</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>m23clientID <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;m23clientIDEOF&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="nu0">927</span></div></li>
<li class="li2"><div class="de2">m23clientIDEOF</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs</div></li>
<li class="li1"><div class="de1"><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>usr<span class="sy0">/</span>lib<span class="sy0">/</span>ssl</div></li>
<li class="li1"><div class="de1"><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>share<span class="sy0">/</span>ca-certificates<span class="sy0">/</span>m23</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">ln</span> <span class="re5">-s</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>lib<span class="sy0">/</span>ssl</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">wget</span> <span class="re5">-qq</span> -O<span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs<span class="sy0">/</span>f5a6a6fe.0 <span class="st0">&quot;https://192.168.1.23/packages/baseSys/ca.crt&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-qq</span> <span class="re5">--no-check-certificate</span> -O<span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs<span class="sy0">/</span>f5a6a6fe.0 <span class="st0">&quot;https://192.168.1.23/packages/baseSys/ca.crt&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0"># Copy the certificate to CAcert</span></div></li>
<li class="li2"><div class="de2"><span class="kw2">cp</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs<span class="sy0">/</span>f5a6a6fe.0 <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>share<span class="sy0">/</span>ca-certificates<span class="sy0">/</span>m23<span class="sy0">/</span>m23server.crt</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">wget</span> <span class="re5">-qq</span> -O<span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs<span class="sy0">/</span>352b5e9f.0 <span class="st0">&quot;https://192.168.1.23/packages/baseSys/ca.crt&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-qq</span> <span class="re5">--no-check-certificate</span> -O<span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs<span class="sy0">/</span>352b5e9f.0 <span class="st0">&quot;https://192.168.1.23/packages/baseSys/ca.crt&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0"># Copy the certificate to CAcert</span></div></li>
<li class="li1"><div class="de1"><span class="kw2">cp</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs<span class="sy0">/</span>352b5e9f.0 <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>share<span class="sy0">/</span>ca-certificates<span class="sy0">/</span>m23<span class="sy0">/</span>m23server.crt</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">chmod</span> <span class="re5">-R</span> <span class="nu0">755</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>lib<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>share<span class="sy0">/</span>ca-certificates<span class="sy0">/</span>m23</div></li>
<li class="li1"><div class="de1"><span class="kw2">chown</span> <span class="re5">-R</span> root <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>lib<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>share<span class="sy0">/</span>ca-certificates<span class="sy0">/</span>m23</div></li>
<li class="li1"><div class="de1"><span class="kw2">chgrp</span> <span class="re5">-R</span> root <span class="sy0">/</span>etc<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>lib<span class="sy0">/</span>ssl<span class="sy0">/</span>certs <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>share<span class="sy0">/</span>ca-certificates<span class="sy0">/</span>m23</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 11.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 11.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 12.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 12.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 13.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 13.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 14.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 14.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 15.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 15.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 16.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 16.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 17.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 17.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 18.04'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> <span class="re5">-i</span> <span class="st_h">'Ubuntu 18.10'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#40;</span> <span class="br0">&#91;</span> $<span class="br0">&#40;</span><span class="kw2">grep</span> <span class="st_h">'Mint'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue -c<span class="br0">&#41;</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">&amp;&amp;</span> <span class="br0">&#91;</span> $<span class="br0">&#40;</span><span class="kw2">sed</span> <span class="st_h">'s/[^0-9]//g'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>issue<span class="br0">&#41;</span> <span class="re5">-gt</span> <span class="nu0">10</span> <span class="br0">&#93;</span> <span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="st_h">'check_certificate = off'</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>wgetrc</div></li>
<li class="li2"><div class="de2"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw3">echo</span> <span class="st_h">'root:$1$KaZ31e6U$C/Vgft/0igLjtyxZkcPD6.:12106:0:99999:7:::'</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>shadow.new</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">grep</span> <span class="re5">-v</span> root <span class="sy0">/</span>etc<span class="sy0">/</span>shadow <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>shadow.new</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">cat</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>shadow.new <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>shadow</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="kw2">chgrp</span> shadow <span class="sy0">/</span>etc<span class="sy0">/</span>shadow</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">chmod</span> <span class="nu0">640</span> <span class="sy0">/</span>etc<span class="sy0">/</span>shadow</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="sy0">!</span> <span class="re5">-f</span> <span class="sy0">/</span>etc<span class="sy0">/</span>sudoers <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> root <span class="sy0">/</span>etc<span class="sy0">/</span>sudoers -c<span class="sy0">`</span> <span class="re5">-eq</span> <span class="nu0">0</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="st0">&quot;root ALL=(ALL) ALL&quot;</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>sudoers</div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-qq</span> <span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_statusBar&amp;percent=&amp;statustext=Hardwareerkennung&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re5">-e</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>scsirun <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">true</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">touch</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>scsirun</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">SCSI_MODULES</span>=<span class="st0">&quot;aic7xxx aic79xx aic7xxx_old BusLogic ncr53c8xx NCR53c406a initio advansys aha1740 aha1542 aha152x atp870u dtc eata fdomain gdth megaraid pas16 pci2220i pci2000 psi240i qlogicfas qlogicfc qlogicisp seagate t128 tmscsim u14-34f ultrastor wd7000 a100u2w 3w-xxxx ata_piix ahci&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># Misc functions</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">moduldir</span>=<span class="st0">&quot;/lib/modules/<span class="es5">`uname -r`</span>/kernel/drivers/scsi&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="st0">&quot;Probing for SCSI cards&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># Try to load the given modules (full path or current directory)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="st0">&quot;6&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>proc<span class="sy0">/</span>sys<span class="sy0">/</span>kernel<span class="sy0">/</span>printk</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> i <span class="kw1">in</span> <span class="re1">$SCSI_MODULES</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="re5">-n</span> <span class="st0">&quot;</span></div></li>
<li class="li2"><div class="de2"><span class="st0">Probing <span class="es2">$i</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe <span class="re1">$i</span> <span class="sy0">&gt;/</span>dev<span class="sy0">/</span>null <span class="nu0">2</span><span class="sy0">&gt;&amp;</span><span class="nu0">1</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">done</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="st0">&quot;Probing for SATA cards&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> mod <span class="kw1">in</span> <span class="sy0">`</span><span class="kw2">find</span> <span class="sy0">/</span>lib<span class="sy0">/</span>modules<span class="sy0">/</span> <span class="re5">-type</span> f <span class="re5">-printf</span> <span class="st0">&quot;%f<span class="es1">\n</span>&quot;</span> <span class="sy0">|</span> <span class="kw2">grep</span> sata <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span><span class="st_h">'.'</span> -f1<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe <span class="re1">$mod</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">done</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> <span class="st0">&quot;0&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>proc<span class="sy0">/</span>sys<span class="sy0">/</span>kernel<span class="sy0">/</span>printk</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe raid0 <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe raid1 <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe raid456 <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe raid10 <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modprobe dm-mod <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span> DEVICE partitions <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>mdadm.conf</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mdadm <span class="re5">-Ebsc</span> partitions <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>mdadm.conf</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#make needed device nodes for MD</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> i <span class="kw1">in</span> <span class="sy0">`</span><span class="kw2">seq</span> <span class="nu0">0</span> <span class="nu0">15</span><span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">mknod</span> <span class="sy0">/</span>dev<span class="sy0">/</span>md<span class="re1">$i</span> b <span class="nu0">9</span> <span class="re1">$i</span> <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">done</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mdadm <span class="re5">-As</span> <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mdadm <span class="re5">-Asc</span> partitions <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> &nbsp;<span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_statusBarInc&amp;percent=25&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re5">-e</span> <span class="sy0">/</span>etc<span class="sy0">/</span>dropbear<span class="sy0">/</span>dropbear_rsa_host_key <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">echo</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">else</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>root<span class="sy0">/</span>.ssh</div></li>
<li class="li1"><div class="de1"><span class="co0"># /etc/ssh/</span></div></li>
<li class="li2"><div class="de2"><span class="kw2">chmod</span> <span class="nu0">700</span> <span class="sy0">/</span>root<span class="sy0">/</span>.ssh</div></li>
<li class="li1"><div class="de1"><span class="co0">#Make sure sshd_config exists to remove complaining</span></div></li>
<li class="li1"><div class="de1"><span class="co0">#touch /etc/ssh/sshd_config</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">wget</span> <span class="re5">-d</span> <span class="re5">-O</span> - <span class="st0">&quot;https://192.168.1.23/packages/baseSys/authorized_keys&quot;</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>root<span class="sy0">/</span>.ssh<span class="sy0">/</span>authorized_keys</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">chmod</span> <span class="nu0">700</span> <span class="sy0">/</span>root<span class="sy0">/</span>.ssh<span class="sy0">/</span>authorized_keys</div></li>
<li class="li1"><div class="de1"><span class="kw2">chown</span> root <span class="sy0">/</span>root<span class="sy0">/</span>.ssh<span class="sy0">/</span>authorized_keys</div></li>
<li class="li1"><div class="de1"><span class="kw2">chgrp</span> root <span class="sy0">/</span>root<span class="sy0">/</span>.ssh<span class="sy0">/</span>authorized_keys</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">userGroup</span>=<span class="sy0">`</span><span class="kw2">find</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config <span class="re5">-printf</span> <span class="st0">&quot;chown %u.%g /etc/ssh/sshd_config&quot;</span><span class="sy0">`</span></div></li>
<li class="li1"><div class="de1"><span class="re2">perm</span>=<span class="sy0">`</span><span class="kw2">find</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config <span class="re5">-printf</span> <span class="st0">&quot;chmod %m /etc/ssh/sshd_config&quot;</span><span class="sy0">`</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">awk</span> <span class="re5">-v</span> <span class="re2">SEARCH</span>=<span class="st0">&quot;ChallengeResponseAuthentication no&quot;</span> <span class="re5">-v</span> <span class="re2">REPLACE</span>=<span class="st0">&quot;ChallengeResponseAuthentication yes&quot;</span> <span class="st_h">'{gsub(SEARCH,REPLACE); print $0} '</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config.m23</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">mv</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config.m23 <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="re1">$userGroup</span></div></li>
<li class="li1"><div class="de1"><span class="re1">$perm</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">sed</span> <span class="re5">-i</span> <span class="st_h">'/PermitRootLogin/s°^\(.*\)°#\1°g'</span> <span class="st_h">'/etc/ssh/sshd_config'</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">cat</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EDIT_appendToFile5a61211d163d9&quot;</span></div></li>
<li class="li1"><div class="de1">PermitRootLogin without-password</div></li>
<li class="li1"><div class="de1">EDIT_appendToFile5a61211d163d9</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">sed</span> <span class="re5">-i</span> <span class="st_h">'/PubkeyAcceptedKeyTypes/s°^\(.*\)°#\1°g'</span> <span class="st_h">'/etc/ssh/sshd_config'</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="kw2">cat</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ssh<span class="sy0">/</span>sshd_config <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EDIT_appendToFile5a61211d16593&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">PubkeyAcceptedKeyTypes</span>=+ssh-dss</div></li>
<li class="li1"><div class="de1">EDIT_appendToFile5a61211d16593</div></li>
<li class="li1"><div class="de1"><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>etc<span class="sy0">/</span>dropbear</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">dropbearkey <span class="re5">-type</span> rsa <span class="re5">-f</span> <span class="sy0">/</span>etc<span class="sy0">/</span>dropbear<span class="sy0">/</span>dropbear_rsa_host_key</div></li>
<li class="li1"><div class="de1">dropbearkey <span class="re5">-type</span> dss <span class="re5">-f</span> <span class="sy0">/</span>etc<span class="sy0">/</span>dropbear<span class="sy0">/</span>dropbear_dss_host_key</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">cp</span> <span class="re5">-r</span> <span class="sy0">/</span>root<span class="sy0">/</span>.ssh <span class="sy0">/</span></div></li>
<li class="li1"><div class="de1"><span class="kw2">chmod</span> <span class="nu0">700</span> <span class="sy0">/</span>.ssh <span class="sy0">/</span>tmp <span class="sy0">/</span></div></li>
<li class="li2"><div class="de2"><span class="kw2">chown</span> root <span class="sy0">/</span>.ssh <span class="sy0">/</span></div></li>
<li class="li1"><div class="de1">dropbear</div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">uname</span> <span class="re5">-r</span> <span class="sy0">|</span> <span class="kw2">grep</span> m23 -c<span class="sy0">`</span> <span class="re5">-eq</span> <span class="nu0">1</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1"><span class="kw3">echo</span> <span class="st_h">'root:$1$pisHk72N$CX4bkis65vbPYcgRY2Swb/:0:0:root:/:/bin/sh'</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span><span class="kw2">passwd</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> &nbsp;<span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_statusBarInc&amp;percent=25&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0">#Check if the client has a dynamic IP</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="sy0">!</span> <span class="re5">-f</span> <span class="sy0">/</span>etc<span class="sy0">/</span>network<span class="sy0">/</span>interfaces <span class="br0">&#93;</span> <span class="sy0">||</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">grep</span> static <span class="sy0">/</span>etc<span class="sy0">/</span>network<span class="sy0">/</span>interfaces <span class="sy0">|</span> <span class="kw2">grep</span> eth -c<span class="sy0">`</span> <span class="re5">-eq</span> <span class="nu0">0</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#Check, if the tool ip is present</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">ip</span> <span class="re5">-V</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="re5">-eq</span> <span class="nu0">0</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">serverGateway</span>=$<span class="br0">&#40;</span><span class="kw2">ip route</span> <span class="sy0">|</span> <span class="kw2">awk</span> <span class="st_h">'/default/ { print $3 }'</span> <span class="sy0">|</span> <span class="kw2">head</span> -<span class="nu0">1</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">serverGateway</span>=$<span class="br0">&#40;</span>route <span class="re5">-n</span> <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st_h">'^0\.0\.0\.0'</span> <span class="sy0">|</span> <span class="kw2">tr</span> <span class="re5">-s</span> <span class="st_h">'[:blank:]'</span> <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span><span class="st_h">' '</span> -f2<span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">fi</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#CloudStack test</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-T5</span> <span class="re5">-t5</span> http:<span class="sy0">//</span><span class="re1">$serverGateway</span><span class="sy0">/</span>latest<span class="sy0">/</span>public-ipv4 <span class="re5">-O</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>clientIP</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="re5">-eq</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">&amp;&amp;</span> <span class="br0">&#91;</span> <span class="re5">-f</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>clientIP <span class="br0">&#93;</span> <span class="sy0">&amp;&amp;</span> <span class="br0">&#91;</span> $<span class="br0">&#40;</span><span class="kw2">grep</span> <span class="re5">-E</span> <span class="st_h">'[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'</span> <span class="re5">-c</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>clientIP<span class="br0">&#41;</span> <span class="re5">-eq</span> <span class="nu0">1</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#yes, run in CloudStack</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">curIP</span>=$<span class="br0">&#40;</span><span class="kw2">cat</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>clientIP<span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#no, normal DHCP IP</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">curIP</span>=<span class="sy0">`</span><span class="kw3">export</span> <span class="re2">LC_ALL</span>=C; <span class="kw2">ifconfig</span> <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st0">&quot;inet addr&quot;</span> <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span><span class="st_h">':'</span> <span class="re5">-f2</span> <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span><span class="st_h">' '</span> <span class="re5">-f1</span> <span class="sy0">|</span> <span class="kw2">head</span> -<span class="nu0">1</span><span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_curDynIP&amp;curIP=<span class="es2">$curIP</span>&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>clientIP.log</div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> &nbsp;<span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_statusBarInc&amp;percent=25&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#lspci searches for pci.ids in /usr/share/misc</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">ln</span> <span class="re5">-s</span> <span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>hwdata <span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>misc <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; m23hwscanner</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-file</span>=<span class="sy0">/</span>tmp<span class="sy0">/</span>partHwData.post https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> &nbsp;<span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_statusBarInc&amp;percent=25&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;&amp;m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">wget</span> <span class="re5">-qq</span> -O<span class="sy0">/</span>dev<span class="sy0">/</span>null <span class="st0">&quot;https://192.168.1.23/packages/setStatus.php?id=56148&amp;status=done<span class="es2">$idvar</span>&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;&amp;m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;<span class="kw2">wget</span> <span class="re5">-qq</span> -O<span class="sy0">/</span>dev<span class="sy0">/</span>null <span class="st0">&quot;https://192.168.1.23/packages/setClientStatus.php?status=1<span class="es2">$idvar</span>&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">fi</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-qq</span> <span class="re5">-T5</span> <span class="re5">-t0</span> <span class="re5">--post-data</span> <span class="st0">&quot;type=MSR_statusBar&amp;percent=&amp;statustext=Warte+auf+weitere+Auftraege&quot;</span> https:<span class="sy0">//</span>192.168.1.23<span class="sy0">/</span>postMessage.php<span class="re1">$idvar</span> <span class="re5">-O</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="co0">#mv work.php `date +%s`.old</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">SEC</span>=<span class="nu0">0</span></div></li>
<li class="li1"><div class="de1"><span class="re2">TIME</span>=<span class="nu0">0</span></div></li>
<li class="li1"><div class="de1"><span class="re2">loopRun</span>=<span class="sy0">`</span><span class="kw2">true</span><span class="sy0">`</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">while</span> <span class="re1">$loopRun</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">dialog</span> <span class="re5">--backtitle</span> <span class="st0">&quot;Willkommen zur Installation Ihres m23 Clients&quot;</span> &nbsp;<span class="re5">--title</span> <span class="st0">&quot;m23 Client Status&quot;</span> <span class="re5">--infobox</span> <span class="st0">&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="st0">Warte auf weitere Auftraege</span></div></li>
<li class="li2"><div class="de2"><span class="st0">Warte <span class="es2">$TIME</span> Min&quot;</span> <span class="nu0">6</span> <span class="nu0">70</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">#Add the client ID if it is available</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">id</span>=<span class="sy0">`</span><span class="kw2">cat</span> <span class="sy0">/</span>m23clientID <span class="nu0">2</span><span class="sy0">&gt;</span> <span class="sy0">/</span>dev<span class="sy0">/</span>null<span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$id</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">then</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">idvar</span>=<span class="st0">&quot;?m23clientID=<span class="es2">$id</span>&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> <span class="re5">-qq</span> -Owork.php-<span class="nu0">1516314909</span>-5a61211da3b03 <span class="st0">&quot;https://192.168.1.23/work.php<span class="es2">$idvar</span>&quot;</span> <span class="re5">--no-check-certificate</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#91;</span> <span class="sy0">`</span><span class="kw2">find</span> work.php-<span class="nu0">1516314909</span>-5a61211da3b03 <span class="re5">-printf</span> <span class="st0">&quot;%s&quot;</span><span class="sy0">`</span> <span class="re5">-gt</span> <span class="nu0">15</span> <span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">then</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">chmod</span> +x work.php-<span class="nu0">1516314909</span>-5a61211da3b03</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">loopRun</span>=<span class="sy0">`</span><span class="kw2">false</span><span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">break</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">fi</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">sleep</span> <span class="nu0">20</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">TIME</span>=<span class="sy0">`</span><span class="kw2">expr</span> <span class="re1">$SEC</span> <span class="sy0">/</span> <span class="nu0">60</span><span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re2">SEC</span>=<span class="sy0">`</span><span class="kw2">expr</span> <span class="re1">$SEC</span> + <span class="nu0">20</span><span class="sy0">`</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">done</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; .<span class="sy0">/</span>work.php-<span class="nu0">1516314909</span>-5a61211da3b03</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">sync</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
</ol></div>
	</p><input type="hidden" id="m23clientID" name="m23clientID" value="927"></td>
	</tr>
</table></div></td><tr></table>

			<INPUT type="submit" name="BUT_refresh" value="Refresh">
		<input type="hidden" name="MSESS_variables" value="a%3A9%3A%7Bs%3A15%3A%22clientAddAction%22%3Bs%3A13%3A%22clientBuilder%22%3Bs%3A15%3A%22preferenceSpace%22%3Ba%3A30%3A%7Bs%3A6%3A%22client%22%3Bs%3A0%3A%22%22%3Bs%3A6%3A%22office%22%3Bs%3A0%3A%22%22%3Bs%3A4%3A%22name%22%3Bs%3A0%3A%22%22%3Bs%3A10%3A%22familyname%22%3Bs%3A0%3A%22%22%3Bs%3A5%3A%22eMail%22%3Bs%3A0%3A%22%22%3Bs%3A3%3A%22mac%22%3Bs%3A0%3A%22%22%3Bs%3A2%3A%22ip%22%3Bs%3A12%3A%22192.168.1.83%22%3Bs%3A7%3A%22netmask%22%3Bs%3A13%3A%22255.255.255.0%22%3Bs%3A7%3A%22gateway%22%3Bs%3A11%3A%22192.168.1.5%22%3Bs%3A4%3A%22dns1%22%3Bs%3A11%3A%2285.88.19.10%22%3Bs%3A4%3A%22dns2%22%3Bs%3A7%3A%228.8.8.8%22%3Bs%3A7%3A%22firstpw%22%3Bs%3A8%3A%22Nashiec0%22%3Bs%3A12%3A%22rootpassword%22%3Bs%3A8%3A%22Eojaing9%22%3Bs%3A8%3A%22boottype%22%3Bs%3A3%3A%22pxe%22%3Bs%3A8%3A%22language%22%3Bs%3A2%3A%22uk%22%3Bs%3A8%3A%22newgroup%22%3Ba%3A1%3A%7Bi%3A0%3Bb%3A0%3B%7Ds%3A5%3A%22login%22%3Bs%3A0%3A%22%22%3Bs%3A4%3A%22arch%22%3Bs%3A5%3A%22amd64%22%3Bs%3A10%3A%22bootloader%22%3Bs%3A4%3A%22grub%22%3Bs%3A12%3A%22packageProxy%22%3Bs%3A12%3A%22192.168.1.23%22%3Bs%3A11%3A%22packagePort%22%3Bs%3A4%3A%222323%22%3Bs%3A8%3A%22timeZone%22%3Bs%3A13%3A%22Europe%2FLondon%22%3Bs%3A10%3A%22ldapserver%22%3Bs%3A8%3A%22m23-LDAP%22%3Bs%3A6%3A%22userID%22%3Bi%3A1001%3Bs%3A7%3A%22groupID%22%3Bi%3A1001%3Bs%3A8%3A%22ldaptype%22%3Bs%3A4%3A%22none%22%3Bs%3A13%3A%22nfshomeserver%22%3Bs%3A0%3A%22%22%3Bs%3A18%3A%22getSystemtimeByNTP%22%3Bb%3A1%3Bs%3A16%3A%22addNewLocalLogin%22%3Bb%3A1%3Bs%3A14%3A%22installPrinter%22%3Bb%3A1%3B%7Ds%3A14%3A%22changeElements%22%3Bs%3A215%3A%22client%23office%23name%23familyname%23eMail%23mac%23ip%23netmask%23gateway%23dns1%23dns2%23firstpw%23rootpassword%23boottype%23language%23login%23arch%23bootloader%23proxy%23timeZone%23ldap%23nfshomeserver%23getSystemtimeByNTP%23addNewLocalLogin%23installPrinter%23%22%3Bs%3A31%3A%22preferenceForceHTMLReloadValues%22%3BN%3Bs%3A7%3A%22to_show%22%3Bs%3A1%3A%220%22%3Bs%3A11%3A%22last_button%22%3Bs%3A9%3A%22no_button%22%3Bs%3A10%3A%22to_compute%22%3Bs%3A1%3A%220%22%3Bs%3A10%3A%22clientName%22%3Bs%3A7%3A%22defuefi%22%3Bs%3A8%3A%22clientID%22%3Bs%3A3%3A%22927%22%3B%7D">
</form>
	<br><a href="indexd20b.html?page=clientdetails&amp;client=defuefi&amp;id=927#criticalStatus"><img src="images/settings.png"> Back to control center <img src="images/settings.png"></a><br><br><br><br><a name="m23helpBox"></a>
	<table class="helptable" align="left" border="0" cellspacing="5" id="ID_helpBox">
<tr><td><p><span class="subhighlight">Help: Current job script
</span></p><p>At this page, you can see the script which is currently being executed on the m23 client (or which is the next one to be executed) as well as the command to request the script.
</p><p>
</p><p>You can copy the command from the text field next to <i>"wget command to fetch the work.php file"</i> to request and display the script. This command can simply be executed from a Linux shell.
</p><p>
</p><p>Under <i>"Current contents of the work.php file"</i>, you can see the source code of the script (with the syntax highlighted).
</p><p></p></td></tr></TABLE>					</td>
									</tr>
			</table>
		</td>
	</tr>
</table>
</body>


<!-- Mirrored from 192.168.1.23/m23admin/index.php?page=showCurrentWorkPHP&client=defuefi&id=927&m23clientID=927&script= by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 18 Jan 2018 22:37:24 GMT -->
</html>
